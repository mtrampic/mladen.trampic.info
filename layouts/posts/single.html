{{ define "main" }}
  {{ $context := . }}
  <article>
    <header class="max-w-prose">
      {{ if .Params.showBreadcrumbs | default (.Site.Params.article.showBreadcrumbs | default false) }}
        {{ partial "breadcrumbs.html" . }}
      {{ end }}
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        {{ .Title | emojify }}
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        {{ partial "article-meta.html" (dict "context" . "scope" "single") }}
      </div>
      {{ with .Params.description }}
        <div class="lead mb-8 text-xl text-neutral-600 dark:text-neutral-300">
          {{ . | markdownify | emojify }}
        </div>
      {{ end }}
    </header>
    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      {{ if and (.Params.showTableOfContents | default (.Site.Params.article.showTableOfContents | default false)) (in .TableOfContents "<ul") }}
        <div class="order-first px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8">
          <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10">
            {{ partial "toc.html" . }}
          </div>
        </div>
      {{ end }}
      <div class="min-w-0 min-h-0 max-w-prose grow">
        {{ .Content | emojify }}
      </div>
    </section>
    
    <!-- Author Info Section moved outside prose section -->
    <div class="max-w-prose">
      {{ partial "author-info.html" . }}
    </div>
    
    <footer class="pt-8 max-w-prose print:hidden">
      {{ partial "article-pagination.html" . }}
      {{ if .Params.showComments | default (.Site.Params.article.showComments | default false) }}
        <div id="comments">
          {{ partial "comments.html" . }}
        </div>
      {{ end }}
      {{ partial "sharing-links.html" . }}
    </footer>
  </article>
{{ end }}
