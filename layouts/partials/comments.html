<div id="giscus-comments" style="margin-top: 2rem;">
  <script src="https://giscus.app/client.js"
          data-repo="mtrampic/mladen.trampic.info"
          data-repo-id="R_kgDOPne8xw"
          data-category="General"
          data-category-id="DIC_kwDOPne8x84CvbjY"
          data-mapping="title"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="preferred_color_scheme"
          data-lang="en"
          crossorigin="anonymous"
          async>
  </script>
  
  <script>
    // Congo theme specific - sync Giscus with theme changes
    function updateGiscusTheme() {
      const giscusFrame = document.querySelector('iframe.giscus-frame');
      if (!giscusFrame) return;
      
      // Check Congo theme's current mode
      const isDark = document.documentElement.classList.contains('dark');
      const theme = isDark ? 'dark' : 'light';
      
      // Send theme update to Giscus
      giscusFrame.contentWindow.postMessage({
        giscus: { setConfig: { theme: theme } }
      }, 'https://giscus.app');
    }

    // Wait for Giscus to load, then set up theme sync
    setTimeout(() => {
      // Initial theme sync
      updateGiscusTheme();
      
      // Watch for Congo theme changes (it toggles 'dark' class on html element)
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
            setTimeout(updateGiscusTheme, 100); // Small delay to ensure theme change is complete
          }
        });
      });
      
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class']
      });
    }, 1000);
  </script>
</div>
